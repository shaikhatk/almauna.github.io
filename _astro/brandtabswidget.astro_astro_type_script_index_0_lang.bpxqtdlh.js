class f{widget;tabButtons;defaultBrandId;tabsContainer;constructor(t){this.widget=t,this.tabButtons=t.querySelectorAll(".brand-tab-button"),this.defaultBrandId=t.getAttribute("data-default-brand")||"",this.tabsContainer=t.querySelector(".tabs-scroll-container"),this.init()}init(){this.tabButtons.forEach(i=>{i.addEventListener("click",a=>this.handleTabClick(a))}),window.addEventListener("popstate",()=>{const a=new URL(window.location.href).searchParams.get("brand");a&&(this.setActiveBrand(a),this.scrollActiveTabIntoView())});const e=new URL(window.location.href).searchParams.get("brand");e?(this.setActiveBrand(e),setTimeout(()=>this.scrollActiveTabIntoView(),100)):this.scrollActiveTabIntoView()}handleTabClick(t){const i=t.currentTarget.getAttribute("data-brand-id");if(!i)return;const a=new URL(window.location.href);a.searchParams.set("brand",i),window.history.pushState({},"",a),this.setActiveBrand(i),this.scrollActiveTabIntoView(),this.widget.dispatchEvent(new CustomEvent("brand-changed",{detail:{brandId:i},bubbles:!0}))}scrollActiveTabIntoView(){const t=this.widget.querySelector('[aria-selected="true"]');t&&this.tabsContainer&&requestAnimationFrame(()=>{t.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})})}setActiveBrand(t){console.log("Setting active brand to:",t),this.tabButtons.forEach(e=>{const i=e.getAttribute("data-brand-id")===t,a=e.querySelector("h2"),n=e.querySelector("p");i?(e.setAttribute("aria-selected","true"),e.classList.remove("bg-white","text-[#1E1E1E]"),e.classList.add("bg-gradient-primary","text-white"),a&&(a.classList.remove("text-[#1E1E1E]"),a.classList.add("text-white")),n&&(n.classList.remove("text-[#1E1E1E]","text-opacity-[50%]"),n.classList.add("text-white","text-opacity-[70%]")),this.updateBrandContent(e)):(e.setAttribute("aria-selected","false"),e.classList.remove("bg-gradient-primary","text-white"),e.classList.add("bg-white","text-[#1E1E1E]"),a&&(a.classList.remove("text-white"),a.classList.add("text-[#1E1E1E]")),n&&(n.classList.remove("text-white","text-opacity-[70%]"),n.classList.add("text-[#1E1E1E]","text-opacity-[50%]")))})}updateBrandContent(t){const e=document.getElementById("widget-brand-logo"),i=document.getElementById("widget-brand-title"),a=document.getElementById("widget-brand-description"),n=document.getElementById("widget-collection-title"),b=document.getElementById("widget-catalog-brand-name"),u=document.getElementById("widget-wholesale-brand-name"),w=document.getElementById("widget-catalog-link"),s=document.getElementById("widget-products-container"),m=t.getAttribute("data-brand-logo"),r=t.getAttribute("data-brand-title"),h=t.getAttribute("data-brand-description"),x=t.getAttribute("data-collection-title"),d=t.getAttribute("data-catalog"),c=t.getAttribute("data-products");if(console.log("Updating brand content:",{title:r,collection:x,catalog:d,productsCount:c?JSON.parse(c).length:0}),e&&m&&(e.src=m,e.alt=r||"Brand Logo"),i&&(i.textContent=r||""),n&&(n.textContent=x||""),b&&(b.textContent=r||""),u&&(u.textContent=r||""),w&&d&&(w.href=d,console.log("Updated catalog link to:",d)),a&&h)try{const l=JSON.parse(h);a.innerHTML=l.map(o=>`<p>${o}</p>`).join("")}catch{a.innerHTML=`<p>${h}</p>`}if(s&&c)try{const l=JSON.parse(c);console.log("Products on tab change:",l),s.style.opacity="0",s.style.transition="opacity 0.3s ease-in-out",s.innerHTML=l.map(o=>{const E=o.id.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]/g,"");return`
              <a href="/brand/${o.brand.id}/${E}" class="bg-white rounded-[8px] p-[24px] md:p-[24px] shadow-secondary h-[350px] w-[290px] hover:shadow-lg transition-shadow group cursor-pointer">
                <div class="flex justify-center items-center">
                  <img
                    src="${o.image}"
                    alt="${o.title}"
                    class="w-[180px] h-[240px] object-cover object-center group-hover:scale-105 transition-transform"
                    loading="lazy"
                  />
                </div>
                <p class="text-[14px] md:text-[16px] mt-[16px] md:mt-[24px] text-wrap text-center group-hover:text-gradient transition-colors">${o.title}</p>
              </a>
            `}).join(""),s.style.opacity="1"}catch{console.error("Error parsing products")}}}function p(){const g=document.querySelector(".brand-tabs-widget");g&&new f(g)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",p):p();document.addEventListener("astro:page-load",p);
